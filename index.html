<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Player Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        #spotify-player {
            margin: 20px auto;
            max-width: 350px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Spotify Player Widget</h1>
    <div id="spotify-player">
        <button id="login">Login with Spotify</button>
        <div id="player-container" style="display:none;">
            <iframe id="spotify-iframe" src="" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
        </div>
    </div>
    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script>
        const CLIENT_ID = '97e08c2a6e8d4219833b9d913ae47f48'; // Your Spotify Client ID
        const REDIRECT_URI = 'https://crowbrandonj.github.io/BrandonRuns/callback'; // Your Redirect URI

        const AUTH_URL = 'https://accounts.spotify.com/authorize?' +
            'response_type=token' +
            '&client_id=' + CLIENT_ID +
            '&scope=user-read-playback-state user-read-currently-playing' +
            '&redirect_uri=' + encodeURIComponent(REDIRECT_URI);

        document.getElementById('login').addEventListener('click', () => {
            window.location.href = AUTH_URL;
        });

        window.addEventListener('load', () => {
            const hash = window.location.hash.substring(1).split('&').reduce((initial, item) => {
                if (item) {
                    const parts = item.split('=');
                    initial[parts[0]] = decodeURIComponent(parts[1]);
                }
                return initial;
            }, {});

            const access_token = hash.access_token;

            if (access_token) {
                document.getElementById('player-container').style.display = 'block';
                const iframe = document.getElementById('spotify-iframe');
                iframe.src = `https://open.spotify.com/embed/track/4uLU6hMCjMI75M1A2tKUQC`; // Example track
            }
        });
    </script>
</body>
</html>